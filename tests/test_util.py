import numpy as np

from step import util


def test_get_change_points():
    array = np.array([ 2.4,  2.4, #1
                       1.6,  1.6,  1.6,  1.6,  1.6, #6
                       2.4,  #7
                       1.6,  1.6,  1.6, #10
                       2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4, #17
                       2.7, 2.7,  2.7,  #20
                       2.4,  2.4,  2.4,  #23
                       2.7,  2.7,  2.7,  #26
                       2.4,  2.4,  2.4, 2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4, #36
                       2.7,  2.7,  2.7,  2.7, #40
                       2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4, #47
                       2.7,  2.7,  2.7,  2.7, 2.7,  2.7,  #53
                       2.4,  2.4,  2.4,  2.4,  #57
                       2.7,  2.7,  2.7,  #60
                       2.4,  2.4, 2.4,  2.4,  2.4,  2.4, #66
                       1.6])

    expected = np.array([1, 6, 7, 10, 17, 20, 23, 26, 36, 40, 47, 53, 57, 60, 66])

    change_points = util.get_change_points(array)

    np.testing.assert_array_equal(change_points, expected)
